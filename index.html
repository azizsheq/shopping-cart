<!DOCTYPE html>
<html>

<head>
   <title>Shopping Cart</title>
   <meta charset="utf-8">
   <meta name="viewport" content="width=device-width, initial-scale=1">
   <link rel="stylesheet" href="https://maxcdn.bootstrapcdn.com/bootstrap/4.0.0/css/bootstrap.min.css">
   <link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/all.css" rel="stylesheet" />
   <link href="style.css" rel="stylesheet">
</head>

<body>

   <section>
      <div class="container">
         <div class="cart">
            <div class="col-md-12 col-lg-10 mx-auto">
               <div class="cart-item">
                  <div class="row">
                     <div class="col-md-7 center-item">
                        <img src="images/product-1.png" alt="">
                        <h5>iPhone 11 128GB Black</h5>
                     </div>

                     <div class="col-md-5 center-item">
                        <div class="input-group number-spinner">
                           <button id="phoneRemoveBtn" class="btn btn-default"><i class="fas fa-minus"></i></button>
                           <input id="phoneQuantity" type="text" class="form-control text-center" value="1">
                           <button id="phoneAddBtn" class="btn btn-default"><i class="fas fa-plus"></i></button>
                        </div>
                        <h5>$<span id="phoneTotalPrice"></span></h5>
                        <img src="images/remove.png" alt="" class="remove-item">
                     </div>
                  </div>
               </div>

               <div class="cart-item">
                  <div class="row">
                     <div class="col-md-7 center-item mx-auto">
                        <img src="images/product-2.png" alt="">
                        <h5>iPhone 11 Silicone Case - Black</h5>
                     </div>
                     <div class="col-md-5 center-item">
                        <div class="input-group number-spinner">
                           <button id="coverRemoveBtn" class="btn btn-default"><i class="fas fa-minus"></i></button>
                           <input id="coverQuantity" type="text" class="form-control text-center" value="1">
                           <button id="coverAddBtn" class="btn btn-default"><i class="fas fa-plus"></i></button>
                        </div>
                        <h5>$<span id="coverTotalPrice"></span></h5>
                        <img src="images/remove.png" alt="" class="remove-item">
                     </div>
                  </div>
               </div>

               <div class="cart-item">
                  <div class="row">

                     <div class="col-md-8">
                        <h5>Subtotal: </h5>
                        <h5>Tax:</h5>
                        <h5>Total:</h5>
                     </div>

                     <div class="col-md-4 status">
                        <h5>$<span id="subTotal"></span></h5>
                        <h5>$0</h5>
                        <h5>$<span id="total"></span></h5>
                     </div>
                  </div>
               </div>

               <div class="col-md-12 pt-4 pb-4">
                  <button type="button" class="btn btn-success check-out">Check Out</button>
               </div>
               
            </div>
         </div>
      </div>
   </section>

   <script>

      const phonePrice = 1240;
      document.getElementById("phoneTotalPrice").innerText = phonePrice;

      // add phone item btn event handler
      const addPhone = document.getElementById("phoneAddBtn");
      addPhone.addEventListener("click", function () {

         const newQuantity = addQuantity("phoneQuantity", +1);
         document.getElementById("phoneQuantity").value = newQuantity;

         updatePriceSpan(phonePrice, "phoneTotalPrice", newQuantity);
      })

      // remove phone item btn event handler
      const removePhone = document.getElementById("phoneRemoveBtn");
      removePhone.addEventListener("click", function () {

         const newQuantity = addQuantity("phoneQuantity", -1);
         document.getElementById("phoneQuantity").value = newQuantity;

         updatePriceSpan(phonePrice, "phoneTotalPrice", newQuantity);
      })

      const coverPrice = 59;
      document.getElementById("coverTotalPrice").innerText = coverPrice;

      // add cover item btn event handler
      const addCover = document.getElementById("coverAddBtn");
      addCover.addEventListener("click", function () {

         const newQuantity = addQuantity("coverQuantity", +1);
         document.getElementById("coverQuantity").value = newQuantity;

         updatePriceSpan(coverPrice, "coverTotalPrice", newQuantity);
      })

      // remove cover item btn event handler
      const removeCover = document.getElementById("coverRemoveBtn");
      removeCover.addEventListener("click", function () {

         const newQuantity = addQuantity("coverQuantity", -1);
         document.getElementById("coverQuantity").value = newQuantity;

         updatePriceSpan(coverPrice, "coverTotalPrice", newQuantity);
      })
      
      function addQuantity(quantityId, value){
         const quantity = document.getElementById(quantityId).value;
         const currentQuantity = parseFloat(quantity);
         const newQuantity = currentQuantity + value;
         return newQuantity;
      }

      function updatePriceSpan(unitPrice, spanId, newQuantity) {
         const currentPrice = parseFloat(unitPrice);
         const updatedPrice = currentPrice * newQuantity;
         document.getElementById(spanId).innerText = updatedPrice;

         document.getElementById("subTotal").innerText = updatedPrice;
         document.getElementById("total").innerText = updatedPrice;
      }      

      const phoneUpdatedPrice = document.getElementById("phoneQuantity").value;
      console.log(phoneUpdatedPrice);
   </script>
</body>

</html>